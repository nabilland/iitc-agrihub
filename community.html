<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diskusi dan Artikel Penanaman Tanaman</title>
    <style>
        /* CSS untuk Tampilan */
        body {
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }

        .container {
            width: 80%;
            margin: auto;
            padding: 20px;
            background-color: white;
            
        }

        h1, h2 {
            color: #198754;
        }

        .form-container {
            margin-bottom: 20px;
        }

        input[type="text"], textarea {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        button {
            background-color: #198754;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        button:hover {
            background-color: #155724;
        }

        .article {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }

        .article h3 {
            margin: 0 0 10px 0;
        }

        .article .article-meta {
            font-size: 0.9em;
            color: gray;
            margin-bottom: 10px;
        }

        .comments {
            margin-top: 20px;
            padding-left: 15px;
            border-left: 2px solid #198754;
        }

        .comment {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .comment-header {
            font-weight: bold;
        }

        .comment-time {
            font-size: 0.85em;
            color: gray;
        }

        .comment-form {
            margin-top: 10px;
        }

        .comment-form input[type="text"] {
            width: calc(100% - 100px);
            display: inline-block;
        }

        .comment-form button {
            width: 80px;
            display: inline-block;
            margin-left: 10px;
        }

        .comment-username {
            font-weight: bold;
            color: #198754;
        }

        /* Login form */
        .login-container {
            margin-bottom: 20px;
            padding: 20px;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            border-radius: 10px;
        }

        .login-container input {
            padding: 10px;
            margin-right: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .login-container button {
            padding: 10px;
            background-color: #198754;
            color: white;
            border: none;
            border-radius: 5px;
        }

        .login-container button:hover {
            background-color: #155724;
        }
    </style>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" />
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet" />
    <!-- Google Icons -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/65ec807597.js" crossorigin="anonymous"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/fonts.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

</head>
<body>
    <!-- Sidebar -->
    <div class="d-flex">
      <nav id="sidebar" class="bg-light sidebar">
        <div class="p-4">
          <a class="navbar-brand" href="#">
            <img src="images/logo.png" id="logo" alt="Logo" class="img-fluid" />
          </a>
          <ul class="list-unstyled components mt-4">
            <li>
              <a href="profile.html">Profil Saya</a>
            </li>
            <li>
              <a href="dashboard.html">Dashboard</a>
            </li>
            <li>
              <a href="plant-guide.html">Plant Guide</a>
            </li>
            <li>
              <a href="community.html">Community</a>
            </li>
            <li>
              <a href="contact.html">Contact Us</a>
            </li>
            <li>
              <a href="home.html">Logout</a>
            </li>
          </ul>
        </div>
      </nav>

<!-- Page Content -->
        <div id="content" class="p-4">
            <div class="container">
                <!-- Logged-in Section -->
                <div id="logged-in-user">
                    <h1><b>Bagikan <span style="color: #198754;">Tips!</span></b></h1>
                    <p>Selamat datang, <span id="display-username" style="color: #198754;">Malika</span>! Ayo, bagikan tips dan pengalamanmu!</p>
                </div>

                <!-- Tips Submission Form -->
                <div class="form-container" id="discussion-section">
                    <form id="discussion-form">
                        <input type="text" id="title" placeholder="Judul" required>
                        <textarea id="content-isi" placeholder="Tulis artikel atau tips di sini..." required></textarea>
                        <button type="submit">Kirim</button>
                    </form>
                </div>

                <br>
                <h2>Daftar Diskusi dan Artikel</h2>
                <div id="article-list">
                    <!-- Daftar artikel akan ditampilkan di sini -->
                </div>
            </div>
        </div>
    </div>

    <br>
    <br>
    <br>
    <footer class="bg-light text-center py-3 mt-5">
        &copy; 2024 Smart Agriculture. All rights reserved.
    </footer>

    <script>
        // Fungsi untuk mengambil waktu saat ini dalam format yang ramah pengguna
        function getCurrentTime() {
            const now = new Date();
            const options = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };
            return now.toLocaleDateString('en-GB', options);
        }

        // Nama pengguna hardcode
        const username = "Malika";

        // JavaScript untuk Interaksi Diskusi dan Komentar
        document.getElementById('discussion-form').addEventListener('submit', function(e) {
            e.preventDefault(); // Mencegah pengiriman form yang default

            // Ambil nilai dari input
            const title = document.getElementById('title').value;
            const contentIsi = document.getElementById('content-isi').value; // Ubah 'content-isi' menjadi nama variabel yang benar
            const currentTime = getCurrentTime();

            // Buat elemen artikel baru
            const article = document.createElement('div');
            article.className = 'article';
            article.innerHTML = `
                <h3>${title}</h3>
                <div class="article-meta">Oleh: ${username} - ${currentTime}</div>
                <p>${contentIsi}</p>
                <div class="comments" id="comments-section"></div>
                <div class="comment-form">
                    <input type="text" placeholder="Tulis komentar..." class="comment-input">
                    <button class="comment-btn">Kirim</button>
                </div>
            `;

            // Tambahkan artikel ke dalam daftar
            document.getElementById('article-list').appendChild(article);

            // Reset form
            document.getElementById('discussion-form').reset();

            // Menambahkan event listener untuk komentar
            const commentButton = article.querySelector('.comment-btn');
            const commentInput = article.querySelector('.comment-input');
            const commentsSection = article.querySelector('#comments-section');

            commentButton.addEventListener('click', function() {
                const commentText = commentInput.value;
                const currentTime = getCurrentTime();

                if (commentText !== "" && username !== "") {
                    const newComment = document.createElement('div');
                    newComment.className = 'comment';
                    newComment.innerHTML = `
                        <div class="comment-header">
                            <span class="comment-username">${username}</span> - <span class="comment-time">${currentTime}</span>
                        </div>
                        <p>${commentText}</p>
                    `;

                    commentsSection.appendChild(newComment);

                    // Reset input komentar setelah dikirim
                    commentInput.value = '';
                }
            });
        });
    </script>
</body>
</html>
